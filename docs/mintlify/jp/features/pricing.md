---
title: "動的価格設定"
description: "動的価格システムの仕組み"
---

# 動的価格システム

The Endex の核心は、需要と供給にリアルタイムで反応する動的価格アルゴリズムです。

## コンセプト

価格が固定（静的）されている従来のショップとは異なり、The Endex は価格を自動的に調整します：

- **プレイヤーが購入すると**、在庫が（理論的に）減少し、需要が増加します -> **価格が上昇します**。
- **プレイヤーが売却すると**、在庫が増加し、供給が増加します -> **価格が下落します**。

これにより、プレイヤーが安く買って高く売ることで利益を得ることができる、活気ある経済が生まれます。

## 価格アルゴリズム

価格は以下の要素を考慮した式を使用して計算されます：

1. **基本価格**: 管理者が設定した開始点。
2. **ボラティリティ（変動率）**: 価格がどれだけ速く変化するか。
3. **取引量**: どれだけのアイテムが取引されているか。
4. **制限**: 極端なインフレ/デフレを防ぐための最低価格と最高価格。

### 簡略化された式

$$
P_{new} = P_{current} \times (1 + \frac{Volume \times Volatility}{Constant})
$$

## ボラティリティの設定

各アイテムは `items.yml` で独自のボラティリティを持つことができます。

- **低ボラティリティ (0.1 - 0.3)**: 安定した価格、ゆっくり変化します。基本資源（石、木材）に適しています。
- **中ボラティリティ (0.4 - 0.7)**: 通常の変動。鉱石やモブドロップに適しています。
- **高ボラティリティ (0.8 - 1.5)**: 非常に不安定な価格、ハイリスク・ハイリターン。レアアイテムに適しています。

```yaml
GOLD_INGOT:
  base-price: 50.0
  volatility: 0.5  # 中ボラティリティ
```

## 価格制限

経済を保護するために、厳格な制限を設定できます：

- `min-price`: 価格はこの値を下回りません。
- `max-price`: 価格はこの値を上回りません。

```yaml
DIAMOND:
  base-price: 100.0
  min-price: 20.0   # 20を下回らない
  max-price: 500.0  # 500を上回らない
```

## 価格の再生

活動がない場合、時間の経過とともに価格がゆっくりと基本価格に戻るように設定できます。これにより、価格が極端な状態で無期限に留まるのを防ぎます。

`config.yml` の `price-regeneration` でこれを有効にします。
